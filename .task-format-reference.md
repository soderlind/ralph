# Ralph Task Format Reference

## Overview

Ralph only processes tasks that follow the standard TASK-XXX: naming convention. This ensures manual tasks in Vibe-Kanban are never accidentally automated.

## Format Specification

```
TASK-XXX: Description
```

### Components

| Component | Required | Description | Example |
|-----------|----------|-------------|---------|
| `TASK-` | ✅ Yes | Prefix (case-sensitive) | `TASK-` |
| `XXX` | ✅ Yes | 3-digit number (001-999) | `001`, `042`, `999` |
| `:` | ✅ Yes | Colon separator | `:` |
| ` ` | ✅ Yes | Single space | ` ` |
| Description | ✅ Yes | Task description | `Create TEST.md file` |

### Regular Expression

```regex
^TASK-\d{3}:\s.+
```

## Valid Examples

✅ `TASK-001: Create TEST.md file with basic content`
✅ `TASK-042: Update configuration settings`
✅ `TASK-123: Refactor parser logic for better performance`
✅ `TASK-999: Final cleanup and documentation`

## Invalid Examples

❌ `Fix bug in parser` - No TASK- prefix
❌ `Task-001: Do something` - Wrong case (lowercase 'task')
❌ `TASK-1: Quick fix` - Not 3 digits
❌ `TASK-0001: Too many digits` - More than 3 digits
❌ `TASK-001 Create file` - Missing colon
❌ `TASK-001:Create file` - Missing space after colon
❌ `task-001: Lower case` - Wrong case

## Usage in Ralph

### ralph-run Command

When you run `ralph run`, the skill will:

1. Fetch all tasks with `status='todo'`
2. **Filter** to only tasks matching `TASK-\d{3}:` pattern
3. Check dependencies
4. Start workspace sessions for ready tasks

### Example Filtering

Given these tasks in Vibe-Kanban:

| Title | Format Valid? | Ralph Action |
|-------|---------------|--------------|
| `TASK-001: Create file` | ✅ Yes | Will process |
| `TASK-002: Update docs` | ✅ Yes | Will process |
| `Fix urgent bug` | ❌ No | **Skipped** |
| `Review PR #123` | ❌ No | **Skipped** |
| `TASK-003: Add tests` | ✅ Yes | Will process |

Result: Ralph processes 3 tasks, skips 2 manual tasks.

## Why This Filtering?

1. **Safety**: Prevents Ralph from automating manual tasks
2. **Flexibility**: Users can create custom tasks alongside Ralph tasks
3. **Clarity**: Clear separation between automated and manual work
4. **Control**: Users maintain full control over what gets automated

## Where Format is Applied

| Command | Applies Format Filter? | Reason |
|---------|----------------------|---------|
| `ralph brd-prd` | ❌ No | Generates documents, not tasks |
| `ralph prd-tasks` | ❌ No | Generates tasks, not filtering |
| `ralph tasks-kanban` | ❌ No | Creates from JSON (already formatted) |
| `ralph run` | ✅ **Yes** | Filters before starting workspaces |
| `ralph review` | ✅ **Yes** | Only reviews Ralph tasks |
| `ralph cleanup` | ✅ **Yes** | Only archives Ralph tasks |

## Best Practices

### For Task Creation

When creating tasks (via `ralph prd-tasks`):
- Tasks are automatically formatted correctly
- No manual intervention needed
- Format is guaranteed

### For Manual Tasks

When creating manual tasks in Vibe-Kanban:
- Use any format you prefer
- Ralph will ignore them
- Safe to mix with Ralph tasks

### For Mixed Projects

If your project has both Ralph tasks and manual tasks:
- Ralph tasks: `TASK-001: ...`, `TASK-002: ...`
- Manual tasks: Any format you want
- Ralph respects the boundary automatically

## Technical Implementation

### In ralph-run Skill

```markdown
Step 2: List Ready Tasks
1. Use vibe_kanban-list_tasks with status='todo'
2. Filter tasks by title format: Only TASK-\d{3}:
3. Filter by dependencies
4. Start workspaces for ready tasks
```

### Pattern Matching

The agent uses pattern matching to identify Ralph tasks:
- Checks title starts with `TASK-`
- Validates 3-digit number
- Confirms colon and space
- Case-sensitive matching

## FAQs

**Q: What if I accidentally use the wrong format?**
A: Ralph will skip that task. You can rename it in Vibe-Kanban or let it run manually.

**Q: Can I change the format?**
A: Yes, but you'd need to update the ralph-run skill and regenerate all tasks.

**Q: Why exactly 3 digits?**
A: Supports up to 999 tasks per project, with consistent sorting and display.

**Q: What about TASK-0: or TASK-00:**?
A: Invalid. Must be exactly 3 digits: 001-999.

**Q: Can I use TASK-1000:?**
A: No. Limited to 999 tasks. If you need more, consider splitting the project.

## Related Documentation

- `skills/ralph-run/SKILL.md` - Full skill implementation
- `skills/ralph-prd-to-tasks/SKILL.md` - Task generation format
- `TEST-GUIDE.md` - Testing with formatted tasks

## Updated

Last updated: 2026-01-31
Format version: 1.0
